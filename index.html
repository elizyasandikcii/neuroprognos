<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroPrognos | HD Risk Assessment with Symptom Selection</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary: #2a5c8a;
            --secondary: #4a9fd5;
            --accent: #ff6b6b;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
            --border-radius: 8px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        /* Header & Navigation */
        header {
            background-color: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .logo-icon {
            color: var(--secondary);
            font-size: 1.8rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
            padding: 5px 0;
            position: relative;
        }

        nav a:hover {
            color: var(--primary);
        }

        nav a.active {
            color: var(--primary);
        }

        nav a.active:after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary);
        }

        .cta-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-block;
        }

        .cta-button:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
        }

        /* Hero Section */
        .hero {
            padding: 80px 0;
            background: linear-gradient(135deg, rgba(42, 92, 138, 0.05) 0%, rgba(74, 159, 213, 0.05) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            color: var(--primary);
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--gray);
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Calculator Selector */
        .calculator-selector {
            text-align: center;
            margin: 40px 0 20px;
        }

        .selector-container {
            display: inline-flex;
            background: white;
            border-radius: var(--border-radius);
            padding: 5px;
            box-shadow: var(--shadow);
            margin-top: 20px;
        }

        .selector-btn {
            padding: 12px 30px;
            border: none;
            background: none;
            font-weight: 600;
            cursor: pointer;
            border-radius: calc(var(--border-radius) - 2px);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .selector-btn.active {
            background-color: var(--primary);
            color: white;
        }

        .selector-btn:not(.active):hover {
            background-color: rgba(42, 92, 138, 0.1);
        }

        /* Calculator Tabs */
        .calculator-tab {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .calculator-tab.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Calculator Section */
        .section {
            padding: 60px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-title h2 {
            font-size: 2.3rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .calculator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 40px;
            margin-top: 20px;
        }

        @media (max-width: 992px) {
            .calculator-container {
                grid-template-columns: 1fr;
            }
        }

        .calculator-form {
            overflow-y: auto;
            max-height: 800px;
            padding-right: 10px;
        }

        /* IMPROVED SYMPTOM SELECTION STYLES */
        .symptom-category {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border-left: 5px solid var(--primary);
            transition: var(--transition);
        }

        .symptom-category:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        .symptom-category.motor {
            border-left-color: var(--danger);
        }

        .symptom-category.cognitive {
            border-left-color: var(--warning);
        }

        .symptom-category.psychiatric {
            border-left-color: var(--info);
        }

        .symptom-category.functional {
            border-left-color: var(--secondary);
        }

        .symptom-category h4 {
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
        }

        .symptom-category h4 i {
            font-size: 1.3rem;
        }

        .symptom-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .symptom-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: var(--light);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            position: relative;
        }

        .symptom-item:hover {
            background: white;
            border-color: var(--secondary);
            transform: translateX(5px);
        }

        .symptom-item.selected {
            background: rgba(42, 92, 138, 0.08);
            border-color: var(--primary);
            box-shadow: 0 2px 8px rgba(42, 92, 138, 0.15);
        }

        /* Custom Checkbox */
        .symptom-checkbox {
            position: relative;
            width: 22px;
            height: 22px;
            flex-shrink: 0;
            margin-right: 15px;
        }

        .symptom-checkbox input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
            z-index: 2;
        }

        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            width: 22px;
            height: 22px;
            background: white;
            border: 2px solid var(--gray);
            border-radius: 4px;
            transition: var(--transition);
        }

        .symptom-checkbox input:checked ~ .checkmark {
            background: var(--primary);
            border-color: var(--primary);
        }

        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
            left: 7px;
            top: 3px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        .symptom-checkbox input:checked ~ .checkmark:after {
            display: block;
        }

        .symptom-label {
            flex-grow: 1;
            font-weight: 500;
            color: var(--dark);
        }

        /* Severity Selector */
        .severity-selector {
            display: flex;
            gap: 8px;
            margin-left: auto;
            flex-shrink: 0;
        }

        .severity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            font-size: 0.75rem;
            font-weight: bold;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .severity-btn.mild {
            background: var(--success);
        }

        .severity-btn.moderate {
            background: var(--warning);
        }

        .severity-btn.severe {
            background: var(--danger);
        }

        .severity-btn.active {
            transform: scale(1.2);
            box-shadow: 0 0 0 2px white, 0 0 0 4px currentColor;
        }

        .severity-btn:hover {
            transform: scale(1.1);
        }

        .severity-btn::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            margin-bottom: 8px;
        }

        .severity-btn:hover::after {
            opacity: 1;
            visibility: visible;
        }

        /* Results Container */
        .results-container {
            background-color: rgba(42, 92, 138, 0.05);
            border-radius: var(--border-radius);
            padding: 30px;
            overflow-y: auto;
            max-height: 800px;
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--light-gray);
        }

        .risk-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: 700;
            box-shadow: var(--shadow);
        }

        .risk-low {
            background: linear-gradient(135deg, var(--success), #20c997);
        }

        .risk-medium {
            background: linear-gradient(135deg, var(--warning), #fd7e14);
        }

        .risk-high {
            background: linear-gradient(135deg, var(--danger), #c92a2a);
        }

        /* Selected Symptoms Display */
        .selected-symptoms {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .selected-symptoms h4 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .selected-list {
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .selected-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: var(--light-gray);
            border-radius: var(--border-radius);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .selected-item .severity-badge {
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .severity-mild {
            background: rgba(40, 167, 69, 0.15);
            color: var(--success);
        }

        .severity-moderate {
            background: rgba(255, 193, 7, 0.15);
            color: var(--warning);
        }

        .severity-severe {
            background: rgba(220, 53, 69, 0.15);
            color: var(--danger);
        }

        .symptom-count {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 0.9rem;
            margin-left: 10px;
        }

        /* Risk Metrics */
        .risk-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .progress-steps:before {
            content: '';
            position: absolute;
            top: 20px;
            left: 10%;
            right: 10%;
            height: 2px;
            background: var(--light-gray);
            z-index: 0;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
            cursor: pointer;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 2px solid var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--gray);
            transition: var(--transition);
            margin-bottom: 8px;
        }

        .step.active .step-number {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        /* Form Steps */
        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(74, 159, 213, 0.2);
        }

        /* DISCLAIMER SECTION */
        .disclaimer-section {
            background: var(--light-gray);
            padding: 50px 0;
            margin-top: 40px;
        }

        .disclaimer-box {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border-left: 5px solid var(--warning);
        }

        .disclaimer-box h3 {
            color: var(--warning);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .disclaimer-content {
            color: var(--gray);
            line-height: 1.8;
        }

        .disclaimer-content ul {
            margin: 15px 0 15px 20px;
        }

        .disclaimer-content li {
            margin-bottom: 8px;
        }

        /* CONTACT SECTION */
        .contact-section {
            background: white;
            padding: 50px 0;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-top: 30px;
        }

        .contact-card {
            background: var(--light);
            padding: 30px;
            border-radius: var(--border-radius);
            text-align: center;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .contact-card:hover {
            border-color: var(--secondary);
            transform: translateY(-5px);
        }

        .contact-icon {
            width: 60px;
            height: 60px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto 20px;
        }

        .contact-card h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .contact-card p {
            color: var(--gray);
            margin-bottom: 15px;
        }

        .contact-link {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 500;
            display: inline-block;
            margin-top: 10px;
        }

        .contact-link:hover {
            text-decoration: underline;
        }

        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 60px 0 30px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-links h4 {
            margin-bottom: 20px;
            color: white;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #adb5bd;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .calculator-container {
                padding: 20px;
            }
            
            .risk-metrics {
                grid-template-columns: 1fr;
            }
            
            .severity-selector {
                flex-direction: column;
                gap: 5px;
            }
            
            .severity-btn {
                width: 25px;
                height: 25px;
                font-size: 0.7rem;
            }
            
            .contact-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Secondary Button */
        .cta-button.secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .cta-button.secondary:hover {
            background: rgba(42, 92, 138, 0.1);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Header & Navigation -->
    <header>
        <div class="container">
            <div class="nav-container">
                <div class="logo">
                    <i class="fas fa-brain logo-icon"></i>
                    <span>NeuroPrognos</span>
                </div>
                <nav>
                    <ul id="navMenu">
                        <li><a href="#home" class="active">Home</a></li>
                        <li><a href="#calculator">Risk Calculator</a></li>
                        <li><a href="#what-is-hd">What is HD</a></li>
                        <li><a href="#our-methods">Our Methods</a></li>
                    </ul>
                </nav>
                <a href="#calculator" class="cta-button">Start Assessment</a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h1>Huntington's Disease Risk Assessment</h1>
                <p>Select your specific symptoms for personalized risk calculation and treatment recommendations.</p>
                <a href="#calculator" class="cta-button">Choose Your Assessment Type <i class="fas fa-arrow-right"></i></a>
            </div>
        </div>
    </section>

    <!-- Calculator Section -->
    <section class="section" id="calculator">
        <div class="container">
            <div class="section-title">
                <h2>HD Risk Calculator with Symptom Selection</h2>
                <p>Select your specific symptoms for personalized risk calculation</p>
            </div>
            
            <div class="calculator-selector">
                <div class="selector-container">
                    <button class="selector-btn active" id="tabKnownBtn">
                        <i class="fas fa-dna"></i>
                        Known CAG Repeat
                    </button>
                    <button class="selector-btn" id="tabUnknownBtn">
                        <i class="fas fa-question-circle"></i>
                        Unknown CAG Repeat
                    </button>
                </div>
            </div>
            
            <!-- Known CAG Repeat Tab -->
            <div class="calculator-tab active" id="tabKnown">
                <div class="progress-steps">
                    <div class="step active" onclick="goToStep('known', 1)">
                        <div class="step-number">1</div>
                        <div class="step-label">Genetic Info</div>
                    </div>
                    <div class="step" onclick="goToStep('known', 2)">
                        <div class="step-number">2</div>
                        <div class="step-label">Motor Symptoms</div>
                    </div>
                    <div class="step" onclick="goToStep('known', 3)">
                        <div class="step-number">3</div>
                        <div class="step-label">Cognitive Symptoms</div>
                    </div>
                    <div class="step" onclick="goToStep('known', 4)">
                        <div class="step-number">4</div>
                        <div class="step-label">Psychiatric Symptoms</div>
                    </div>
                </div>
                
                <div class="calculator-container">
                    <div class="calculator-form">
                        <!-- Step 1: Genetic Information -->
                        <div class="form-step active" id="knownStep1">
                            <h3>Genetic Information</h3>
                            
                            <div class="form-group">
                                <label for="knownAge">Current Age</label>
                                <input type="number" id="knownAge" min="18" max="100" value="35">
                            </div>
                            
                            <div class="form-group">
                                <label for="knownCAG">CAG Repeat Length</label>
                                <input type="number" id="knownCAG" min="10" max="100" value="42">
                            </div>
                            
                            <button class="cta-button" onclick="nextStep('known', 2)">
                                Next: Motor Symptoms <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        
                        <!-- Step 2: Motor Symptoms -->
                        <div class="form-step" id="knownStep2">
                            <h3>Motor Symptoms</h3>
                            <p>Select the motor symptoms you're experiencing</p>
                            
                            <div class="symptom-category motor" id="motorSymptoms">
                                <h4><i class="fas fa-running"></i> Motor Symptoms</h4>
                                <div class="symptom-list" id="motorList">
                                    <!-- Symptoms will be added by JavaScript -->
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 15px; margin-top: 20px;">
                                <button class="cta-button secondary" onclick="prevStep('known', 1)">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                                <button class="cta-button" onclick="nextStep('known', 3)">
                                    Next: Cognitive Symptoms <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Step 3: Cognitive Symptoms -->
                        <div class="form-step" id="knownStep3">
                            <h3>Cognitive Symptoms</h3>
                            <p>Select cognitive symptoms you're experiencing</p>
                            
                            <div class="symptom-category cognitive" id="cognitiveSymptoms">
                                <h4><i class="fas fa-brain"></i> Cognitive Symptoms</h4>
                                <div class="symptom-list" id="cognitiveList">
                                    <!-- Symptoms will be added by JavaScript -->
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 15px; margin-top: 20px;">
                                <button class="cta-button secondary" onclick="prevStep('known', 2)">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                                <button class="cta-button" onclick="nextStep('known', 4)">
                                    Next: Psychiatric Symptoms <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Step 4: Psychiatric Symptoms -->
                        <div class="form-step" id="knownStep4">
                            <h3>Psychiatric & Functional Symptoms</h3>
                            <p>Select psychiatric symptoms and functional impacts</p>
                            
                            <div class="symptom-category psychiatric" id="psychiatricSymptoms">
                                <h4><i class="fas fa-heartbeat"></i> Psychiatric Symptoms</h4>
                                <div class="symptom-list" id="psychiatricList">
                                    <!-- Symptoms will be added by JavaScript -->
                                </div>
                            </div>
                            
                            <div class="symptom-category functional" id="functionalSymptoms">
                                <h4><i class="fas fa-tasks"></i> Functional Impact</h4>
                                <div class="symptom-list" id="functionalList">
                                    <!-- Symptoms will be added by JavaScript -->
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 15px; margin-top: 20px;">
                                <button class="cta-button secondary" onclick="prevStep('known', 3)">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                                <button class="cta-button" onclick="calculateKnownRisk()">
                                    <i class="fas fa-calculator"></i> Calculate Risk
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="results-container">
                        <div class="results-header">
                            <div class="risk-circle risk-medium" id="knownRiskCircle">
                                <span id="knownRiskPercentage">--%</span>
                            </div>
                            <h3 id="knownRiskCategory">Complete assessment to see results</h3>
                            <p id="knownRiskDescription">Based on your specific symptoms and genetic profile</p>
                        </div>
                        
                        <!-- Selected Symptoms Display -->
                        <div class="selected-symptoms">
                            <h4><i class="fas fa-clipboard-list"></i> Selected Symptoms <span class="symptom-count" id="knownSymptomCount">0</span></h4>
                            <div class="selected-list" id="knownSelectedList">
                                <div style="text-align: center; color: var(--gray); padding: 20px;">
                                    <i class="fas fa-clipboard-list" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.5;"></i>
                                    <p>No symptoms selected yet</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="risk-metrics">
                            <div class="metric-card">
                                <div class="metric-value" id="knownFiveYearRisk">--%</div>
                                <div class="metric-label">5-Year Diagnosis Risk</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="knownTenYearRisk">--%</div>
                                <div class="metric-label">10-Year Diagnosis Risk</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="knownExpectedOnset">--</div>
                                <div class="metric-label">Expected Onset Age</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="knownCAPScore">--</div>
                                <div class="metric-label">CAP Score</div>
                            </div>
                        </div>
                        
                        <div class="chart-container" style="height: 200px; margin: 20px 0;">
                            <canvas id="knownProgressionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Unknown CAG Repeat Tab -->
            <div class="calculator-tab" id="tabUnknown">
                <div class="progress-steps">
                    <div class="step active" onclick="goToStep('unknown', 1)">
                        <div class="step-number">1</div>
                        <div class="step-label">Family History</div>
                    </div>
                    <div class="step" onclick="goToStep('unknown', 2)">
                        <div class="step-number">2</div>
                        <div class="step-label">Symptoms</div>
                    </div>
                    <div class="step" onclick="goToStep('unknown', 3)">
                        <div class="step-number">3</div>
                        <div class="step-label">Risk Factors</div>
                    </div>
                </div>
                
                <div class="calculator-container">
                    <div class="calculator-form">
                        <!-- Step 1: Family History -->
                        <div class="form-step active" id="unknownStep1">
                            <h3>Family History & Demographics</h3>
                            
                            <div class="form-group">
                                <label for="unknownAge">Current Age</label>
                                <input type="number" id="unknownAge" min="18" max="100" value="35">
                            </div>
                            
                            <button class="cta-button" onclick="nextStep('unknown', 2)">
                                Next: Symptom Selection <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        
                        <!-- Step 2: Symptoms -->
                        <div class="form-step" id="unknownStep2">
                            <h3>Symptom Selection</h3>
                            <p>Select symptoms you're currently experiencing</p>
                            
                            <div class="symptom-category motor">
                                <h4><i class="fas fa-running"></i> Motor Symptoms</h4>
                                <div class="symptom-list" id="unknownMotorList">
                                    <!-- Symptoms will be added by JavaScript -->
                                </div>
                            </div>
                            
                            <div class="symptom-category cognitive">
                                <h4><i class="fas fa-brain"></i> Cognitive Symptoms</h4>
                                <div class="symptom-list" id="unknownCognitiveList">
                                    <!-- Symptoms will be added by JavaScript -->
                                </div>
                            </div>
                            
                            <div class="symptom-category psychiatric">
                                <h4><i class="fas fa-heartbeat"></i> Psychiatric Symptoms</h4>
                                <div class="symptom-list" id="unknownPsychiatricList">
                                    <!-- Symptoms will be added by JavaScript -->
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 15px; margin-top: 20px;">
                                <button class="cta-button secondary" onclick="prevStep('unknown', 1)">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                                <button class="cta-button" onclick="nextStep('unknown', 3)">
                                    Next: Additional Factors <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Step 3: Additional Factors -->
                        <div class="form-step" id="unknownStep3">
                            <h3>Additional Risk Factors</h3>
                            
                            <div class="form-group">
                                <label for="unknownSymptomDuration">
                                    How long have you experienced these symptoms?
                                </label>
                                <select id="unknownSymptomDuration">
                                    <option value="none">No symptoms</option>
                                    <option value="recent">Less than 6 months</option>
                                    <option value="moderate">6 months - 2 years</option>
                                    <option value="long">More than 2 years</option>
                                </select>
                            </div>
                            
                            <div style="display: flex; gap: 15px; margin-top: 20px;">
                                <button class="cta-button secondary" onclick="prevStep('unknown', 2)">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                                <button class="cta-button" onclick="calculateUnknownRisk()">
                                    <i class="fas fa-calculator"></i> Calculate Risk
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="results-container">
                        <div class="results-header">
                            <div class="risk-circle risk-medium" id="unknownRiskCircle">
                                <span id="unknownRiskPercentage">--%</span>
                            </div>
                            <h3 id="unknownRiskCategory">Complete assessment to see results</h3>
                            <p id="unknownRiskDescription">Based on family history and symptom profile</p>
                        </div>
                        
                        <div class="selected-symptoms">
                            <h4><i class="fas fa-clipboard-list"></i> Selected Symptoms <span class="symptom-count" id="unknownSymptomCount">0</span></h4>
                            <div class="selected-list" id="unknownSelectedList">
                                <div style="text-align: center; color: var(--gray); padding: 20px;">
                                    <i class="fas fa-clipboard-list" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.5;"></i>
                                    <p>No symptoms selected yet</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="risk-metrics">
                            <div class="metric-card">
                                <div class="metric-value" id="unknownLifetimeRisk">--%</div>
                                <div class="metric-label">Estimated Lifetime Risk</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="unknownGeneticRisk">--%</div>
                                <div class="metric-label">Genetic Carrier Probability</div>
                            </div>
                        </div>
                        
                        <div class="chart-container" style="height: 200px; margin: 20px 0;">
                            <canvas id="unknownRiskChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Disclaimer Section -->
    <section class="disclaimer-section">
        <div class="container">
            <div class="disclaimer-box">
                <h3><i class="fas fa-exclamation-triangle"></i> Important Disclaimer</h3>
                <div class="disclaimer-content">
                    <p><strong>This tool is for informational and educational purposes only.</strong> It is not a substitute for professional medical advice, diagnosis, or treatment.</p>
                    
                    <ul>
                        <li>This risk calculator provides <strong>estimated probabilities</strong> based on mathematical models and cannot provide a definitive diagnosis</li>
                        <li>Results should be discussed with a qualified healthcare provider, preferably a neurologist or genetic counselor</li>
                        <li>Do not make medical decisions based solely on the results of this calculator</li>
                        <li>If you are experiencing symptoms, please consult with a healthcare professional</li>
                        <li>For genetic testing and definitive diagnosis, consult with a genetic counselor</li>
                    </ul>
                    
                    <p style="margin-top: 15px; font-style: italic;">
                        NeuroPrognos is an educational tool developed for the TILT Initiative. It is not intended for clinical use and should not replace professional medical evaluation.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact-section">
        <div class="container">
            <div class="section-title">
                <h2>Contact Us</h2>
                <p>Get in touch with us for more information</p>
            </div>
            
            <div class="contact-grid">
                <div class="contact-card">
                    <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h4>Email Us</h4>
                    <p>For general inquiries and support</p>
                    <a href="mailto:info@neuroprognos.org" class="contact-link">info@neuroprognos.org</a>
                </div>
                
                <div class="contact-card">
                    <div class="contact-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h4>Research Inquiries</h4>
                    <p>For research collaboration and data access</p>
                    <a href="mailto:research@neuroprognos.org" class="contact-link">research@neuroprognos.org</a>
                </div>
                
                <div class="contact-card">
                    <div class="contact-icon">
                        <i class="fas fa-handshake"></i>
                    </div>
                    <h4>TILT Initiative</h4>
                    <p>Learn more about our parent organization</p>
                    <a href="https://tiltinitiative.org" target="_blank" class="contact-link">Visit TILT Initiative</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div>
                    <div class="logo" style="color: white; margin-bottom: 20px;">NeuroPrognos</div>
                    <p>Symptom-specific HD risk assessment with personalized insights.</p>
                    <p style="margin-top: 20px; font-size: 0.9rem; color: #6c757d;">A TILT Initiative Research Platform</p>
                </div>
                
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#calculator">Risk Calculator</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h4>HD Resources</h4>
                    <ul>
                        <li><a href="https://hdsa.org" target="_blank">Huntington's Disease Society of America</a></li>
                        <li><a href="https://www.huntington-study-group.org" target="_blank">Huntington Study Group</a></li>
                        <li><a href="https://hopes.stanford.edu" target="_blank">HOPES Huntington's Disease</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright" style="text-align: center; padding-top: 30px; border-top: 1px solid #495057; color: #adb5bd;">
                <p>&copy; 2023 NeuroPrognos. A TILT Initiative Project. Symptom-specific HD risk assessment system. v2.4.1</p>
            </div>
        </div>
    </footer>

    <script>
        // Tab Switching
        document.getElementById('tabKnownBtn').addEventListener('click', () => {
            document.getElementById('tabKnownBtn').classList.add('active');
            document.getElementById('tabUnknownBtn').classList.remove('active');
            document.getElementById('tabKnown').classList.add('active');
            document.getElementById('tabUnknown').classList.remove('active');
            updateKnownResults();
        });
        
        document.getElementById('tabUnknownBtn').addEventListener('click', () => {
            document.getElementById('tabUnknownBtn').classList.add('active');
            document.getElementById('tabKnownBtn').classList.remove('active');
            document.getElementById('tabUnknown').classList.add('active');
            document.getElementById('tabKnown').classList.remove('active');
            updateUnknownResults();
        });
        
        // Step Navigation
        function nextStep(type, step) {
            const steps = document.querySelectorAll(`#${type} .form-step`);
            steps.forEach(s => s.classList.remove('active'));
            document.getElementById(`${type}Step${step}`).classList.add('active');
            
            // Update step indicators
            document.querySelectorAll(`#${type} .step`).forEach((s, index) => {
                s.classList.remove('active');
                if (index < step) s.classList.add('active');
            });
            
            // Update results if on final step
            if (type === 'known' && step === 4) {
                setTimeout(updateKnownResults, 100);
            } else if (type === 'unknown' && step === 3) {
                setTimeout(updateUnknownResults, 100);
            }
        }
        
        function prevStep(type, step) {
            const steps = document.querySelectorAll(`#${type} .form-step`);
            steps.forEach(s => s.classList.remove('active'));
            document.getElementById(`${type}Step${step}`).classList.add('active');
            
            // Update step indicators
            document.querySelectorAll(`#${type} .step`).forEach((s, index) => {
                s.classList.remove('active');
                if (index < step) s.classList.add('active');
            });
        }
        
        function goToStep(type, step) {
            const steps = document.querySelectorAll(`#${type} .form-step`);
            steps.forEach(s => s.classList.remove('active'));
            document.getElementById(`${type}Step${step}`).classList.add('active');
            
            // Update step indicators
            document.querySelectorAll(`#${type} .step`).forEach((s, index) => {
                s.classList.remove('active');
                if (index < step) s.classList.add('active');
            });
        }
        
        // Symptom Database
        const symptomDatabase = {
            motor: [
                { id: 'chorea-mild', name: 'Mild chorea', description: 'Occasional involuntary movements' },
                { id: 'chorea-moderate', name: 'Moderate chorea', description: 'Regular involuntary movements' },
                { id: 'chorea-severe', name: 'Severe chorea', description: 'Constant involuntary movements' },
                { id: 'dystonia', name: 'Dystonia', description: 'Muscle contractions causing twisting' },
                { id: 'rigidity', name: 'Muscle rigidity', description: 'Stiffness and resistance to movement' },
                { id: 'bradykinesia', name: 'Slowed movements', description: 'General slowing of physical movements' },
                { id: 'gait-problems', name: 'Gait problems', description: 'Difficulty with walking pattern' },
                { id: 'balance-issues', name: 'Balance issues', description: 'Problems maintaining balance' },
                { id: 'falls', name: 'Frequent falls', description: 'Regular loss of balance' }
            ],
            cognitive: [
                { id: 'memory-problems', name: 'Memory problems', description: 'Difficulty remembering recent events' },
                { id: 'concentration', name: 'Poor concentration', description: 'Trouble focusing on tasks' },
                { id: 'decision-making', name: 'Decision-making issues', description: 'Difficulty making choices' },
                { id: 'word-finding', name: 'Word-finding difficulty', description: 'Trouble recalling words' },
                { id: 'speech-problems', name: 'Speech problems', description: 'Slurred or unclear speech' },
                { id: 'comprehension', name: 'Comprehension issues', description: 'Difficulty understanding information' }
            ],
            psychiatric: [
                { id: 'depression', name: 'Depression', description: 'Persistent sadness or low mood' },
                { id: 'anxiety', name: 'Anxiety', description: 'Excessive worry or nervousness' },
                { id: 'irritability', name: 'Irritability', description: 'Easily annoyed or angered' },
                { id: 'apathy', name: 'Apathy/Lack of motivation', description: 'Loss of interest or motivation' },
                { id: 'insomnia', name: 'Insomnia', description: 'Difficulty sleeping' },
                { id: 'fatigue', name: 'Fatigue', description: 'Constant tiredness' }
            ],
            functional: [
                { id: 'work-difficulty', name: 'Work difficulties', description: 'Trouble performing job tasks' },
                { id: 'daily-tasks', name: 'Daily task problems', description: 'Difficulty with routine activities' },
                { id: 'driving', name: 'Driving difficulties', description: 'Problems with driving skills' }
            ]
        };
        
        // Unknown CAG symptoms (no severity)
        const unknownSymptoms = {
            motor: [
                { id: 'unknown-chorea', name: 'Involuntary movements', description: 'Uncontrolled movements' },
                { id: 'unknown-gait', name: 'Gait problems', description: 'Walking difficulties' },
                { id: 'unknown-balance', name: 'Balance issues', description: 'Problems with balance' },
                { id: 'unknown-slowness', name: 'Slowed movements', description: 'General slowing' }
            ],
            cognitive: [
                { id: 'unknown-memory', name: 'Memory problems', description: 'Forgetfulness' },
                { id: 'unknown-concentration', name: 'Poor concentration', description: 'Focus issues' },
                { id: 'unknown-planning', name: 'Planning difficulties', description: 'Trouble organizing tasks' }
            ],
            psychiatric: [
                { id: 'unknown-depression', name: 'Depression', description: 'Low mood' },
                { id: 'unknown-anxiety', name: 'Anxiety', description: 'Worry or nervousness' },
                { id: 'unknown-irritability', name: 'Irritability', description: 'Easily angered' },
                { id: 'unknown-apathy', name: 'Apathy/Lack of motivation', description: 'Loss of interest' }
            ]
        };
        
        // Store selected symptoms
        let knownSelectedSymptoms = {};
        let unknownSelectedSymptoms = {};
        
        // Initialize symptoms
        function initializeSymptoms() {
            // Known CAG symptoms
            Object.keys(symptomDatabase).forEach(category => {
                const container = document.getElementById(`${category}List`);
                if (!container) return;
                
                container.innerHTML = '';
                
                symptomDatabase[category].forEach(symptom => {
                    const symptomItem = createSymptomItem(symptom, category, 'known');
                    container.appendChild(symptomItem);
                });
            });
            
            // Unknown CAG symptoms
            Object.keys(unknownSymptoms).forEach(category => {
                const container = document.getElementById(`unknown${category.charAt(0).toUpperCase() + category.slice(1)}List`);
                if (!container) return;
                
                container.innerHTML = '';
                
                unknownSymptoms[category].forEach(symptom => {
                    const symptomItem = createSymptomItem(symptom, category, 'unknown');
                    container.appendChild(symptomItem);
                });
            });
        }
        
        function createSymptomItem(symptom, category, type) {
            const div = document.createElement('div');
            div.className = 'symptom-item';
            div.dataset.id = symptom.id;
            div.dataset.category = category;
            div.dataset.type = type;
            
            if (type === 'known') {
                div.innerHTML = `
                    <div class="symptom-checkbox">
                        <input type="checkbox" id="${symptom.id}">
                        <span class="checkmark"></span>
                    </div>
                    <div class="symptom-info">
                        <div class="symptom-label">${symptom.name}</div>
                        <div class="symptom-description" style="font-size: 0.85rem; color: var(--gray); margin-top: 3px;">
                            ${symptom.description}
                        </div>
                    </div>
                    <div class="severity-selector">
                        <button class="severity-btn mild" data-severity="mild" data-tooltip="Mild">M</button>
                        <button class="severity-btn moderate" data-severity="moderate" data-tooltip="Moderate">M</button>
                        <button class="severity-btn severe" data-severity="severe" data-tooltip="Severe">S</button>
                    </div>
                `;
            } else {
                div.innerHTML = `
                    <div class="symptom-checkbox">
                        <input type="checkbox" id="${symptom.id}">
                        <span class="checkmark"></span>
                    </div>
                    <div class="symptom-info">
                        <div class="symptom-label">${symptom.name}</div>
                        <div class="symptom-description" style="font-size: 0.85rem; color: var(--gray); margin-top: 3px;">
                            ${symptom.description}
                        </div>
                    </div>
                `;
            }
            
            // Add event listeners
            const checkbox = div.querySelector('input[type="checkbox"]');
            const severityBtns = div.querySelectorAll('.severity-btn');
            
            // Click on item toggles selection
            div.addEventListener('click', function(e) {
                if (!e.target.classList.contains('severity-btn')) {
                    checkbox.checked = !checkbox.checked;
                    updateSymptomSelection(symptom.id, checkbox.checked, category, type);
                }
            });
            
            // Checkbox change
            checkbox.addEventListener('change', function() {
                updateSymptomSelection(symptom.id, this.checked, category, type);
            });
            
            // Severity buttons (for known CAG only)
            severityBtns.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    // Remove active class from all buttons in this item
                    severityBtns.forEach(b => b.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Check the checkbox if not already checked
                    if (!checkbox.checked) {
                        checkbox.checked = true;
                        updateSymptomSelection(symptom.id, true, category, type);
                    } else {
                        // Update severity for existing selection
                        if (type === 'known' && knownSelectedSymptoms[symptom.id]) {
                            knownSelectedSymptoms[symptom.id].severity = this.dataset.severity;
                            updateSelectedList(type);
                        }
                    }
                });
            });
            
            return div;
        }
        
        function updateSymptomSelection(symptomId, isSelected, category, type) {
            const symptomItem = document.querySelector(`[data-id="${symptomId}"][data-type="${type}"]`);
            
            if (type === 'known') {
                if (isSelected) {
                    if (!knownSelectedSymptoms[symptomId]) {
                        const symptom = symptomDatabase[category].find(s => s.id === symptomId);
                        const severityBtn = symptomItem.querySelector('.severity-btn.active');
                        const severity = severityBtn ? severityBtn.dataset.severity : 'mild';
                        
                        knownSelectedSymptoms[symptomId] = {
                            name: symptom.name,
                            category: category,
                            severity: severity
                        };
                        
                        // Make sure at least one severity is selected
                        if (!severityBtn) {
                            const mildBtn = symptomItem.querySelector('.severity-btn.mild');
                            mildBtn.classList.add('active');
                            knownSelectedSymptoms[symptomId].severity = 'mild';
                        }
                        
                        symptomItem.classList.add('selected');
                    }
                } else {
                    delete knownSelectedSymptoms[symptomId];
                    symptomItem.classList.remove('selected');
                    symptomItem.querySelectorAll('.severity-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                }
                updateSelectedList('known');
                if (document.getElementById('knownStep4').classList.contains('active')) {
                    updateKnownResults();
                }
            } else {
                if (isSelected) {
                    const symptom = unknownSymptoms[category].find(s => s.id === symptomId);
                    unknownSelectedSymptoms[symptomId] = {
                        name: symptom.name,
                        category: category
                    };
                    symptomItem.classList.add('selected');
                } else {
                    delete unknownSelectedSymptoms[symptomId];
                    symptomItem.classList.remove('selected');
                }
                updateSelectedList('unknown');
                if (document.getElementById('unknownStep3').classList.contains('active')) {
                    updateUnknownResults();
                }
            }
        }
        
        function updateSelectedList(type) {
            if (type === 'known') {
                const container = document.getElementById('knownSelectedList');
                const countElement = document.getElementById('knownSymptomCount');
                const symptoms = knownSelectedSymptoms;
                
                countElement.textContent = Object.keys(symptoms).length;
                
                if (Object.keys(symptoms).length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; color: var(--gray); padding: 20px;">
                            <i class="fas fa-clipboard-list" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.5;"></i>
                            <p>No symptoms selected yet</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = '';
                
                // Group by category
                const grouped = {};
                Object.values(symptoms).forEach(symptom => {
                    if (!grouped[symptom.category]) grouped[symptom.category] = [];
                    grouped[symptom.category].push(symptom);
                });
                
                Object.keys(grouped).forEach(category => {
                    grouped[category].forEach(symptom => {
                        const item = document.createElement('div');
                        item.className = 'selected-item';
                        item.innerHTML = `
                            <span>${symptom.name}</span>
                            <span class="severity-badge severity-${symptom.severity}">
                                ${symptom.severity.charAt(0).toUpperCase() + symptom.severity.slice(1)}
                            </span>
                        `;
                        container.appendChild(item);
                    });
                });
            } else {
                const container = document.getElementById('unknownSelectedList');
                const countElement = document.getElementById('unknownSymptomCount');
                const symptoms = unknownSelectedSymptoms;
                
                countElement.textContent = Object.keys(symptoms).length;
                
                if (Object.keys(symptoms).length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; color: var(--gray); padding: 20px;">
                            <i class="fas fa-clipboard-list" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.5;"></i>
                            <p>No symptoms selected yet</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = '';
                
                // Group by category
                const grouped = {};
                Object.values(symptoms).forEach(symptom => {
                    if (!grouped[symptom.category]) grouped[symptom.category] = [];
                    grouped[symptom.category].push(symptom);
                });
                
                Object.keys(grouped).forEach(category => {
                    grouped[category].forEach(symptom => {
                        const item = document.createElement('div');
                        item.className = 'selected-item';
                        item.innerHTML = `<span>${symptom.name}</span>`;
                        container.appendChild(item);
                    });
                });
            }
        }
        
        // Charts
        let knownChart, unknownChart;
        
        function initializeCharts() {
            // Known CAG Chart
            const knownCtx = document.getElementById('knownProgressionChart');
            if (knownCtx) {
                knownChart = new Chart(knownCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['Current', '+2', '+4', '+6', '+8', '+10 years'],
                        datasets: [
                            {
                                label: 'Symptom Progression',
                                data: [0, 15, 30, 50, 70, 85],
                                borderColor: 'rgb(42, 92, 138)',
                                backgroundColor: 'rgba(42, 92, 138, 0.1)',
                                borderWidth: 3,
                                tension: 0.3,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: { 
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Unknown CAG Chart
            const unknownCtx = document.getElementById('unknownRiskChart');
            if (unknownCtx) {
                unknownChart = new Chart(unknownCtx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['Family History', 'Symptoms', 'Duration', 'Age'],
                        datasets: [{
                            label: 'Risk Factors',
                            data: [25, 30, 20, 25],
                            backgroundColor: [
                                'rgba(42, 92, 138, 0.7)',
                                'rgba(74, 159, 213, 0.7)',
                                'rgba(255, 107, 107, 0.7)',
                                'rgba(255, 193, 7, 0.7)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }
        
        // Risk Calculation Functions
        function calculateKnownRisk() {
            const age = parseInt(document.getElementById('knownAge').value) || 35;
            const cag = parseInt(document.getElementById('knownCAG').value) || 42;
            const symptomCount = Object.keys(knownSelectedSymptoms).length;
            
            // Calculate severity score
            let severityScore = 0;
            Object.values(knownSelectedSymptoms).forEach(symptom => {
                switch(symptom.severity) {
                    case 'mild': severityScore += 1; break;
                    case 'moderate': severityScore += 2; break;
                    case 'severe': severityScore += 3; break;
                }
            });
            
            // Base risk calculation
            let baseRisk = 0;
            if (cag >= 40) baseRisk = 50;
            else if (cag >= 36) baseRisk = 30;
            else baseRisk = 5;
            
            // Adjust for symptoms and severity
            const symptomAdjustment = (symptomCount * 5) + (severityScore * 3);
            const totalRisk = Math.min(95, baseRisk + symptomAdjustment);
            
            // Calculate other metrics
            const fiveYearRisk = Math.min(90, totalRisk * 0.6);
            const tenYearRisk = Math.min(90, totalRisk * 0.8);
            const expectedOnset = cag >= 40 ? 45 : cag >= 36 ? 55 : 65;
            const capScore = ((age * cag) / 1000).toFixed(1);
            
            // Update display
            document.getElementById('knownRiskPercentage').textContent = Math.round(totalRisk) + '%';
            document.getElementById('knownFiveYearRisk').textContent = Math.round(fiveYearRisk) + '%';
            document.getElementById('knownTenYearRisk').textContent = Math.round(tenYearRisk) + '%';
            document.getElementById('knownExpectedOnset').textContent = expectedOnset;
            document.getElementById('knownCAPScore').textContent = capScore;
            
            // Update risk circle
            const riskCircle = document.getElementById('knownRiskCircle');
            riskCircle.className = 'risk-circle ';
            if (totalRisk < 30) {
                riskCircle.classList.add('risk-low');
                document.getElementById('knownRiskCategory').textContent = 'Low Risk';
            } else if (totalRisk < 60) {
                riskCircle.classList.add('risk-medium');
                document.getElementById('knownRiskCategory').textContent = 'Medium Risk';
            } else {
                riskCircle.classList.add('risk-high');
                document.getElementById('knownRiskCategory').textContent = 'High Risk';
            }
            
            // Update chart
            if (knownChart) {
                const progression = [totalRisk * 0.2, totalRisk * 0.4, totalRisk * 0.6, totalRisk * 0.8, totalRisk * 0.95, totalRisk];
                knownChart.data.datasets[0].data = progression;
                knownChart.update();
            }
            
            return totalRisk;
        }
        
        function calculateUnknownRisk() {
            const age = parseInt(document.getElementById('unknownAge').value) || 35;
            const symptomCount = Object.keys(unknownSelectedSymptoms).length;
            const duration = document.getElementById('unknownSymptomDuration').value;
            
            // Base risk based on age
            let baseRisk = 10;
            if (age > 40) baseRisk += 10;
            if (age > 50) baseRisk += 15;
            
            // Adjust for symptoms
            const symptomAdjustment = symptomCount * 8;
            
            // Adjust for duration
            let durationAdjustment = 0;
            switch(duration) {
                case 'recent': durationAdjustment = 5; break;
                case 'moderate': durationAdjustment = 15; break;
                case 'long': durationAdjustment = 25; break;
            }
            
            const totalRisk = Math.min(90, baseRisk + symptomAdjustment + durationAdjustment);
            const lifetimeRisk = Math.min(95, totalRisk * 1.2);
            
            // Update display
            document.getElementById('unknownRiskPercentage').textContent = Math.round(totalRisk) + '%';
            document.getElementById('unknownLifetimeRisk').textContent = Math.round(lifetimeRisk) + '%';
            document.getElementById('unknownGeneticRisk').textContent = Math.round(totalRisk * 0.8) + '%';
            
            // Update risk circle
            const riskCircle = document.getElementById('unknownRiskCircle');
            riskCircle.className = 'risk-circle ';
            if (totalRisk < 25) {
                riskCircle.classList.add('risk-low');
                document.getElementById('unknownRiskCategory').textContent = 'Low Risk';
            } else if (totalRisk < 50) {
                riskCircle.classList.add('risk-medium');
                document.getElementById('unknownRiskCategory').textContent = 'Medium Risk';
            } else {
                riskCircle.classList.add('risk-high');
                document.getElementById('unknownRiskCategory').textContent = 'High Risk';
            }
            
            // Update chart
            if (unknownChart) {
                const chartData = [
                    totalRisk * 0.3, // Family History
                    symptomCount * 10, // Symptoms
                    duration === 'none' ? 5 : 
                    duration === 'recent' ? 15 :
                    duration === 'moderate' ? 25 : 35, // Duration
                    age > 50 ? 30 : age > 40 ? 20 : 10 // Age
                ];
                unknownChart.data.datasets[0].data = chartData;
                unknownChart.update();
            }
            
            return totalRisk;
        }
        
        function updateKnownResults() {
            if (document.getElementById('knownStep4').classList.contains('active')) {
                calculateKnownRisk();
            }
        }
        
        function updateUnknownResults() {
            if (document.getElementById('unknownStep3').classList.contains('active')) {
                calculateUnknownRisk();
            }
        }
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            initializeSymptoms();
            initializeCharts();
            
            // Auto-calculate with default values
            setTimeout(() => {
                calculateKnownRisk();
                calculateUnknownRisk();
                
                // Auto-select a few symptoms for demo
                const demoSymptoms = ['chorea-mild', 'memory-problems', 'depression'];
                demoSymptoms.forEach(symptomId => {
                    const checkbox = document.getElementById(symptomId);
                    if (checkbox) {
                        checkbox.checked = true;
                        const category = symptomId.includes('chorea') ? 'motor' :
                                       symptomId.includes('memory') ? 'cognitive' : 'psychiatric';
                        updateSymptomSelection(symptomId, true, category, 'known');
                    }
                });
            }, 500);
            
            // Smooth scrolling for navigation
            document.querySelectorAll('nav a').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const targetId = this.getAttribute('href');
                    
                    // Only handle internal links for smooth scrolling
                    if (targetId.startsWith('#')) {
                        e.preventDefault();
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 80,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
